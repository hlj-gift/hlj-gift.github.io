(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-board-board"],{2368:function(t,e,n){"use strict";(function(t){n("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("c9b5"),n("bf0f"),n("ab80"),n("dc8a"),n("5c47"),n("2c10"),n("23f4"),n("7d2f"),n("9c4e"),n("5ef2"),n("aa9c"),n("f7a5");var a=getApp(),i=t.database(),o=a.globalData,c=n("235a"),r=n("7033").cbq,s=n("70b4"),u=null,d={data:function(){return{login:!1,account:"",password:"",autologin:!1,info:o.info,users:[],usercopy:[],currentIndex:0}},onLoad:function(){u=this;var t=uni.getStorageSync("STOREKEY2");t&&t.account&&(u.account=t.account,t.password&&(u.password=t.password,u.autologin=!0)),o.info||uni.reLaunch({url:"/pages/get/get"})},onUnload:function(){u.handle&&clearInterval(u.handle)},methods:{mask:function(t){return"*******"+t.toString().substring(t.length-4)},prepareData:function(){var t=Object.keys(u.info.location);return t},setauto:function(t){u.autologin=!u.autologin},scrolluser:function(){u.handle=setInterval((function(){u.currentIndex>=u.usercopy.length-1?u.currentIndex=0:u.currentIndex+=1,console.log(u.currentIndex,u.usercopy.length)}),500)},refreshda:function(){if(u.login){u.users=[];var t=s.formatDateToString(new Date).split(" ")[0];i.command.aggregate;r(i.collection("Gdata").aggregate().match({group:new RegExp(t+".*","i")}).end(),{success:function(t){var e=[],n=u.prepareData();for(var a in t.data){var i=t.data[a],o=u.info.reward[i.group];if(o){var c=[];for(var r in o)-1!=n.indexOf(o[r])&&c.push([r,o[r]]);for(var r in c){var s=c[r],d=i.users[i.successIndex[s[0]]];d?e.push({index:r,_id:i._id,id:d,reward:s[1],store:u.info.location[s[1]],time:i.group,checked:!!i.checked&&i.checked["m"+d]}):d="未发放"}}}u.handle&&(clearInterval(u.handle),u.handle=!1),u.users=e,u.usercopy=e.slice(),u.scrolluser()}})}},logincheck:function(){if("admin"!=u.account)uni.showToast({title:"错误",icon:"error"});else{uni.showLoading({mask:!0});r(i.collection("Ginfo").doc(u.account).get(),{success:function(t){if(uni.hideLoading(),t.data[0]){var e=t.data[0].pwd;if(c.hash.auth(u.password,e,"8fdeaa2948ecce44a582e5dbb1e5251f"))return uni.setStorage({key:"STOREKEY2",data:{account:u.account,password:u.autologin?u.password:""}}),u.login=!0,void u.refreshda()}uni.showToast({title:"错误",icon:"error"})},fail:function(t){uni.hideLoading(),uni.showToast({title:"错误",icon:"error"})}})}}}};e.default=d}).call(this,n("861b")["default"])},"495e":function(t,e,n){"use strict";var a=n("834c"),i=n.n(a);i.a},"834c":function(t,e,n){var a=n("c938");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("967d").default;i("74f503fc",a,!0,{sourceMap:!1,shadowMode:!1})},c938:function(t,e,n){var a=n("c86c");e=a(!1),e.push([t.i,"uni-page-body[data-v-605af72e]{background-color:#641717;color:#fff}body.?%PAGE?%[data-v-605af72e]{background-color:#641717}.clas2[data-v-605af72e]{background-color:#881717}uni-view[data-v-605af72e]{font-size:%?26?%}.headline[data-v-605af72e]{display:flex;justify-content:space-between;font-size:%?40?%;border-bottom:1px solid #666;padding:%?10?% %?30?%}.headline2[data-v-605af72e]{margin-top:%?50?%;display:flex;justify-content:center;font-size:%?50?%;padding:%?10?% %?30?%}.item[data-v-605af72e]{display:flex;justify-content:space-between;padding:%?10?% %?30?%}",""]),t.exports=e},d37a9:function(t,e,n){"use strict";n.r(e);var a=n("2368"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},ebc8:function(t,e,n){"use strict";n.r(e);var a=n("fba6"),i=n("d37a9");for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("495e");var c=n("828b"),r=Object(c["a"])(i["default"],a["b"],a["c"],!1,null,"605af72e",null,!1,a["a"],void 0);e["default"]=r.exports},f1b3:function(t,e,n){t.exports=n.p+"static/qr.png"},fba6:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[t.login?a("v-uni-view",{},[a("v-uni-view",{staticStyle:{width:"1080px",height:"800px",overflow:"scroll","margin-left":"30rpx",display:"flex","justify-content":"space-around","align-items":"flex-start"}},[a("v-uni-view",{staticStyle:{width:"500px"}},[a("v-uni-view",{staticClass:"headline2",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.refreshda.apply(void 0,arguments)}}},[t._v("老道外·新食尚 5元美食盲盒")]),a("v-uni-view",{staticClass:"headline"},[t._v("今日中奖用户"),a("v-uni-view",{staticStyle:{"font-size":"40rpx"}},[t._v("奖品")])],1),t._l(t.usercopy,(function(e,n){return e&&"未发放"!=e.id&&t.currentIndex<=n?a("v-uni-view",{staticClass:"item",class:e.index%2==0?"clas2":""},[a("v-uni-view",{staticStyle:{width:"40%"}},[t._v(t._s(t.mask(e.id)))]),a("v-uni-view",{staticStyle:{width:"60%","text-align":"right"}},[t._v(t._s(e.store)+" "+t._s(e.reward))])],1):t._e()})),t._l(t.usercopy,(function(e,n){return e&&"未发放"!=e.id&&t.currentIndex>n?a("v-uni-view",{staticClass:"item",class:e.index%2==0?"clas2":""},[a("v-uni-view",{staticStyle:{width:"40%"}},[t._v(t._s(t.mask(e.id)))]),a("v-uni-view",{staticStyle:{width:"60%","text-align":"right"}},[t._v(t._s(e.store)+" "+t._s(e.reward))])],1):t._e()}))],2),a("v-uni-view",{staticStyle:{width:"500px"}},[a("v-uni-image",{staticStyle:{width:"500px",height:"800px"},attrs:{src:n("f1b3"),mode:"aspectFit"}})],1)],1),a("v-uni-view",{staticStyle:{height:"250rpx"}})],1):a("v-uni-view",{staticStyle:{padding:"30rpx"}},[a("v-uni-input",{attrs:{placeholder:"账户"},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}}),a("v-uni-input",{staticStyle:{"margin-top":"20rpx"},attrs:{password:!0,placeholder:"密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("v-uni-view",{staticStyle:{display:"flex","justify-content":"flex-start","align-items":"center","font-size":"25rpx","margin-top":"20rpx"}},[a("v-uni-icon",{attrs:{type:t.autologin?"success":"circle"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setauto.apply(void 0,arguments)}}}),a("v-uni-view",{staticStyle:{"margin-left":"10rpx"}},[t._v("记住密码")])],1),a("v-uni-button",{staticStyle:{"margin-top":"20rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.logincheck.apply(void 0,arguments)}}},[t._v("登录")])],1)],1)},i=[]}}]);