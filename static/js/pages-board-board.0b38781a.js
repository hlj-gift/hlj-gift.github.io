(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-board-board"],{2368:function(t,n,e){"use strict";(function(t){e("6a54"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("c9b5"),e("bf0f"),e("ab80"),e("dc8a"),e("f7a5"),e("aa9c"),e("5c47"),e("2c10"),e("23f4"),e("7d2f"),e("9c4e"),e("5ef2");var a=getApp(),o=t.database(),i=a.globalData,c=e("235a"),r=e("7033").cbq,s=e("70b4"),u=null,l={data:function(){return{login:!1,account:"",password:"",autologin:!1,info:i.info,users:[],usercopy:[]}},onLoad:function(){u=this;var t=uni.getStorageSync("STOREKEY2");t&&t.account&&(u.account=t.account,t.password&&(u.password=t.password,u.autologin=!0))},onUnload:function(){u.handle&&clearInterval(u.handle)},methods:{mask:function(t){return"*******"+t.toString().substring(t.length-4)},prepareData:function(){var t=Object.keys(u.info.location);return t},setauto:function(t){console.log(t),u.autologin=!u.autologin},scrolluser:function(){u.handle=setInterval((function(){var t=u.usercopy[0],n=u.usercopy.slice(1);n.push(t),u.usercopy=n}),500)},refreshda:function(){if(u.login){u.users=[];var t=s.formatDateToString(new Date).split(" ")[0];console.log(t);o.command.aggregate;r(o.collection("Gdata").aggregate().match({group:new RegExp(t+".*","i")}).end(),{success:function(t){console.log(t);var n=[],e=u.prepareData();for(var a in t.data){var o=t.data[a];console.log(o.group);var i=u.info.reward[o.group];if(i){console.log(i);var c=[];for(var r in i)-1!=e.indexOf(i[r])&&c.push([r,i[r]]);for(var r in c){var s=c[r],l=o.users[o.successIndex[s[0]]];l||(l="未发放"),n.push({index:r,_id:o._id,id:l,reward:s[1],store:u.info.location[s[1]],time:o.group,checked:!!o.checked&&o.checked["m"+l]})}}}console.log(n),u.handle&&(clearInterval(u.handle),u.handle=!1),u.users=n,u.usercopy=n.slice(),u.scrolluser()}})}},logincheck:function(){if("admin"!=u.account)uni.showToast({title:"错误",icon:"error"});else{console.log(u.info.stores[u.account]),uni.showLoading({mask:!0});r(o.collection("Ginfo").doc(u.account).get(),{success:function(t){if(uni.hideLoading(),t.data[0]){var n=t.data[0].pwd;if(console.log(n),c.hash.auth(u.password,n,"8fdeaa2948ecce44a582e5dbb1e5251f"))return uni.setStorage({key:"STOREKEY2",data:{account:u.account,password:u.autologin?u.password:""}}),u.login=!0,void u.refreshda()}uni.showToast({title:"错误",icon:"error"})},fail:function(t){uni.hideLoading(),uni.showToast({title:"错误",icon:"error"})}})}}}};n.default=l}).call(this,e("861b")["default"])},"568b":function(t,n,e){"use strict";e.d(n,"b",(function(){return a})),e.d(n,"c",(function(){return o})),e.d(n,"a",(function(){}));var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-view",[t.login?e("v-uni-view",{},[e("v-uni-button",{staticStyle:{"margin-top":"20rpx",width:"100rpx","font-size":"20rpx","background-color":"darkred",color:"white",padding:"10rpx"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.refreshda.apply(void 0,arguments)}}},[t._v("刷新")]),e("v-uni-view",{staticStyle:{width:"700rpx","margin-left":"30rpx"}},[e("v-uni-view",{staticStyle:{"margin-top":"150rpx",display:"flex","justify-content":"center","font-size":"50rpx",padding:"10rpx 30rpx"}},[t._v("黑龙江礼物 5元美食盲盒")]),e("v-uni-view",{staticStyle:{display:"flex","justify-content":"space-between","font-size":"40rpx","border-bottom":"1px solid #666666",padding:"10rpx 30rpx"}},[t._v("今日中奖用户"),e("v-uni-view",{staticStyle:{"font-size":"40rpx"}},[t._v("奖品")])],1),t._l(t.usercopy,(function(n,a){return n&&"未发放"!=n.id?e("v-uni-view",{class:n.index%2==0?"clas2":"",staticStyle:{display:"flex","justify-content":"space-between",padding:"10rpx 30rpx"}},[e("v-uni-view",{staticStyle:{width:"40%"}},[t._v(t._s(t.mask(n.id)))]),e("v-uni-view",{staticStyle:{width:"60%","text-align":"right"}},[t._v(t._s(n.store)+" "+t._s(n.reward))])],1):t._e()}))],2),e("v-uni-view",{staticStyle:{height:"250rpx"}})],1):e("v-uni-view",{staticStyle:{padding:"30rpx"}},[e("v-uni-input",{attrs:{placeholder:"账户"},model:{value:t.account,callback:function(n){t.account=n},expression:"account"}}),e("v-uni-input",{staticStyle:{"margin-top":"20rpx"},attrs:{password:!0,placeholder:"密码"},model:{value:t.password,callback:function(n){t.password=n},expression:"password"}}),e("v-uni-view",{staticStyle:{display:"flex","justify-content":"flex-start","align-items":"center","font-size":"25rpx","margin-top":"20rpx"}},[e("v-uni-icon",{attrs:{type:t.autologin?"success":"circle"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.setauto.apply(void 0,arguments)}}}),e("v-uni-view",{staticStyle:{"margin-left":"10rpx"}},[t._v("记住密码")])],1),e("v-uni-button",{staticStyle:{"margin-top":"20rpx"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.logincheck.apply(void 0,arguments)}}},[t._v("登录")])],1)],1)},o=[]},a0fb:function(t,n,e){"use strict";var a=e("d79c"),o=e.n(a);o.a},cd0b:function(t,n,e){var a=e("c86c");n=a(!1),n.push([t.i,"uni-page-body[data-v-752a2ef0]{background-color:#641717;color:#fff}body.?%PAGE?%[data-v-752a2ef0]{background-color:#641717}.clas2[data-v-752a2ef0]{background-color:#881717}uni-view[data-v-752a2ef0]{font-size:%?26?%}",""]),t.exports=n},d37a9:function(t,n,e){"use strict";e.r(n);var a=e("2368"),o=e.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){e.d(n,t,(function(){return a[t]}))}(i);n["default"]=o.a},d79c:function(t,n,e){var a=e("cd0b");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=e("967d").default;o("913ce97c",a,!0,{sourceMap:!1,shadowMode:!1})},ebc8:function(t,n,e){"use strict";e.r(n);var a=e("568b"),o=e("d37a9");for(var i in o)["default"].indexOf(i)<0&&function(t){e.d(n,t,(function(){return o[t]}))}(i);e("a0fb");var c=e("828b"),r=Object(c["a"])(o["default"],a["b"],a["c"],!1,null,"752a2ef0",null,!1,a["a"],void 0);n["default"]=r.exports}}]);